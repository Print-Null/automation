host: common_host
http_type: http
request_type: post
parameter_type: json
timeout: 120
address:
  0: /open/v1/notify
headers:
  0:
    content-type: application/x-www-form-urlencoded
    Charset: UTF-8
    Accept-Language: ZH-CN

success:
  parameter:
    # 使用商户仓库地址做为揽件地址
    0:
      nonceStr: $[python]str(int(time.mktime(time.strptime(str(datetime.datetime.now()),"%Y-%m-%d %H:%M:%S.%f"))))$
      sign: "sha256"
      mchId: $[config]merchant_id$
      warehouseNo: $open_v1_warehouse_0_0_0_["data"][0]["warehouseNo"]$
      estimateParcelNumber: $[python]random.randint(1,100)$
      remark: "warehouse notify test"
    # 使用详细地址做为揽件地址
    1:
      nonceStr: $[python]str(int(time.mktime(time.strptime(str(datetime.datetime.now()),"%Y-%m-%d %H:%M:%S.%f"))))$
      sign: "sha256"
      mchId: $[config]merchant_id$
      srcName: $[python]"collect materials"+str(random.randint(1,99999))$
      srcProvinceName: $[config]srcProvinceName$
      srcDetailAddress: "998/15  กะ  Pkhon Si"
      srcPostalCode: $[config]srcPostalCode$
      srcPhone: $[python]"0145"+str(random.randint(100000,999999))$
      srcCityName: $[config]srcCityName$
      estimateParcelNumber: $[python]random.randint(1,100)$
      remark: "详细揽件地址测试"

  check:
    check_type: json
    expected_code: 200
    code: 1
    code_key: ""
    message: "success"

  relevance:
    - '["data"]["ticketPickupId"]'

error:
  parameter: {}
  check: {}
